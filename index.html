<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MADLUV</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Intro Screen -->
    <div class="intro-screen" id="introScreen">
        <div class="grid-bg"></div>
        <div class="floating-orbs">
            <div class="orb"></div>
            <div class="orb"></div>
            <div class="orb"></div>
        </div>
        <div class="logo-container">
            <h1 class="main-logo">MADLUV</h1>
            <div class="subtitle">MADLUV DID IT BETTER</div>
        </div>
        <div class="enter-prompt">
            <p>Click to enter</p>
        </div>
    </div>

    <!-- Main Website Content -->
    <div class="main-content" id="mainContent">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <img src="https://github.com/KIDDASS/MADLUV/raw/main/3dgifmaker97667.gif" alt="MADLUV" class="nav-logo-img">
                </div>
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </button>
                <div class="nav-links">
            
                    <a href="#members" class="nav-link">Meet MADLUV</a>
                    <a href="https://discord.gg/MREY8gc95S" target="_blank" class="discord-btn">Discord</a>
                </div>
            </div>
            <div class="mobile-menu" id="mobileMenu">
                <div class="nav-links">
              
                    <a href="#members" class="nav-link">Meet MADLUV</a>
                    <a href="https://discord.gg/MREY8gc95S" target="_blank" class="discord-btn">Discord</a>
                </div>
            </div>
        </nav>

        <!-- Audio Player -->
        <div class="audio-player" id="audio-player">
            <div class="audio-header">
                <div class="audio-info">
                    <img class="audio-cover" id="audio-cover" src="https://github.com/KIDDASS/MADLUV/raw/main/MDLV.png" alt="Audio Cover">
                    <div class="audio-details">
                        <div class="audio-title" id="audio-title">PARA SA STREET</div>
                        <div class="audio-artist" id="audio-artist">MADLUV</div>
                    </div>
                </div>
                <button class="minimize-btn" id="minimize-btn">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13H5v-2h14v2z"/>
                    </svg>
                </button>
            </div>
            
            <div class="audio-content">
                <div class="audio-controls-row">
                    <button class="audio-btn" id="prev-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                        </svg>
                    </button>
                    <button class="audio-btn play-pause-btn" id="play-pause-btn">
                        <svg id="play-icon-audio" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                        <svg id="pause-icon-audio" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                        </svg>
                    </button>
                    <button class="audio-btn" id="next-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="audio-progress">
                    <span class="time-current" id="time-current">0:00</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                        <input type="range" class="progress-slider" id="progress-slider" min="0" max="100" value="0">
                    </div>
                    <span class="time-total" id="time-total">0:00</span>
                </div>
                
                <div class="volume-control">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                    <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="50">
                </div>
            </div>
        </div>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-container">
                <div class="hero-content">
                    <h1 class="hero-title">MADLUV</h1>
                    <p class="hero-subtitle">MADLUV DID IT BETTER</p>
                    <p class="hero-description">
                        Welcome to MADLUV #winterszn
                    <a href="#members" class="meet-team-btn">Meet MADLUV</a>
                </div>
                <div class="hero-image">
                    <div class="logo-display">
                        <img src="https://github.com/KIDDASS/MADLUV/raw/main/pag_mamahal_para_sa_madluv.png" alt="MADLUV Logo">
                    </div>
                </div>
            </div>
        </section>

     

        <!-- Members Section -->
        <section class="members-section" id="members">
            <div class="members-container">
                <h2 class="section-title">Meet The Madluv</h2>
                <div class="members-grid" id="membersGrid">
                    <!-- Members will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Discord Section -->
        <section class="discord-section">
            <div class="discord-container">
                <div class="discord-content">
                    <h2 class="discord-title">.gg/madluv</h2>
                    <div class="member-count" id="memberCount">Loading members...</div>
                    <div class="discord-info">
                        <p>Join our community and be part of the MADLUV family.</p>
                        <a href="https://discord.gg/MREY8gc95S" target="_blank" class="join-discord-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 127.14 96.36" class="discord-icon">
                                <path fill="currentColor" d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/>
                            </svg>
                            Join Discord
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>&copy; MADLUV. All Rights Reserved 2025</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const introScreen = document.getElementById("introScreen");
            const mainContent = document.getElementById("mainContent");
            const membersGrid = document.getElementById("membersGrid");
            const memberCount = document.getElementById("memberCount");

            // Audio Player Elements
            const audioPlayer = document.getElementById("audio-player");
            const minimizeBtn = document.getElementById("minimize-btn");
            const playPauseBtn = document.getElementById("play-pause-btn");
            const playIcon = document.getElementById("play-icon-audio");
            const pauseIcon = document.getElementById("pause-icon-audio");
            const progressSlider = document.getElementById("progress-slider");
            const progressFill = document.getElementById("progress-fill");
            const currentTime = document.getElementById("time-current");
            const totalTime = document.getElementById("time-total");
            const volumeSlider = document.getElementById("volume-slider");

            // Background Music
            const bgMusic = new Audio("https://github.com/KIDDASS/MADLUV/raw/main/Hev%20Abi%20-%20Para%20Sa%20Streets%20(Official%20Lyric%20Video)%20(Prod.%20Noane).mp3");
            bgMusic.loop = true;
            bgMusic.volume = 0.5;
            let musicPlaying = false;
            let isMinimized = false;

            // Format time helper
            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }

            // Update progress
            function updateProgress() {
                if (bgMusic.duration) {
                    const progress = (bgMusic.currentTime / bgMusic.duration) * 100;
                    progressFill.style.width = `${progress}%`;
                    progressSlider.value = progress;
                    currentTime.textContent = formatTime(bgMusic.currentTime);
                    totalTime.textContent = formatTime(bgMusic.duration);
                }
            }

            // Audio event listeners
            bgMusic.addEventListener('loadedmetadata', () => {
                totalTime.textContent = formatTime(bgMusic.duration);
            });

            bgMusic.addEventListener('timeupdate', updateProgress);

            // Progress slider
            progressSlider.addEventListener('input', () => {
                const time = (progressSlider.value / 100) * bgMusic.duration;
                bgMusic.currentTime = time;
            });

            // Volume slider
            volumeSlider.addEventListener('input', () => {
                bgMusic.volume = volumeSlider.value / 100;
            });

            // Play/Pause button
            playPauseBtn.addEventListener('click', () => {
                if (musicPlaying) {
                    bgMusic.pause();
                    musicPlaying = false;
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                } else {
                    bgMusic.play().then(() => {
                        musicPlaying = true;
                        playIcon.style.display = 'none';
                        pauseIcon.style.display = 'block';
                    }).catch(err => console.log("Error playing audio:", err));
                }
            });

            // Minimize button
            minimizeBtn.addEventListener('click', () => {
                isMinimized = !isMinimized;
                audioPlayer.classList.toggle('minimized', isMinimized);
                minimizeBtn.classList.toggle('minimized', isMinimized);
            });

            // Draggable audio player
            let isDragging = false;
            let dragOffset = { x: 0, y: 0 };

            audioPlayer.addEventListener('mousedown', (e) => {
                if (e.target.tagName === 'BUTTON' || 
                    e.target.tagName === 'INPUT' || 
                    e.target.tagName === 'SVG' || 
                    e.target.tagName === 'PATH' ||
                    e.target.closest('button') ||
                    e.target.closest('input')) {
                    return;
                }
                
                isDragging = true;
                const rect = audioPlayer.getBoundingClientRect();
                dragOffset.x = e.clientX - rect.left;
                dragOffset.y = e.clientY - rect.top;
                
                audioPlayer.style.transition = 'none';
                audioPlayer.style.cursor = 'grabbing';
                document.body.style.userSelect = 'none';
                
                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const x = e.clientX - dragOffset.x;
                const y = e.clientY - dragOffset.y;
                
                const maxX = window.innerWidth - audioPlayer.offsetWidth;
                const maxY = window.innerHeight - audioPlayer.offsetHeight;
                
                const constrainedX = Math.max(0, Math.min(maxX, x));
                const constrainedY = Math.max(0, Math.min(maxY, y));
                
                audioPlayer.style.left = `${constrainedX}px`;
                audioPlayer.style.top = `${constrainedY}px`;
                audioPlayer.style.right = 'auto';
            });

            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    audioPlayer.style.transition = 'all 0.5s ease';
                    audioPlayer.style.cursor = 'move';
                    document.body.style.userSelect = '';
                }
            });

            // Handle intro screen click
            introScreen.addEventListener("click", () => {
                introScreen.classList.add("fade-out");
                
                bgMusic.play().then(() => {
                    musicPlaying = true;
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'block';
                }).catch(err => {
                    console.log("Audio blocked:", err);
                    musicPlaying = false;
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                });

                setTimeout(() => {
                    introScreen.style.display = "none";
                    mainContent.classList.add("show");
                    audioPlayer.classList.add("visible");
                }, 1500);
            });

            // Static member data
            const staticMembers = [
                { id: "819836396944228362", username: "MADLUV", status: "dnd" },
                { id: "1238732015763849247", username: "MADLUV ", status: "dnd" },
                { id: "1217035273607839847", username: "MADLUV", status: "dnd" },
                { id: "1326463667625001014", username: "MADLUV", status: "dnd" },
                { id: "1182924751530893362", username: "MADLUV", status: "dnd" },
                { id: "858012562775212092", username: "MADLUV", status: "dnd" },
                { id: "1041957402901233748", username: "MADLUV", status: "dnd" },
                { id: "791163040858243093", username: "MADLUV", status: "dnd" }
            ];

            // Load Discord members
            async function loadMembers() {
                memberCount.textContent = `1742 Members`;
                
                const memberIDs = [
                    "819836396944228362",
                    "1238732015763849247", 
                    "1217035273607839847",
                    "1326463667625001014",
                    "1182924751530893362",
                    "858012562775212092",
                    "1041957402901233748",
                    "791163040858243093"
                ];
                
                for (let i = 0; i < memberIDs.length; i++) {
                    const id = memberIDs[i];
                    let memberData = null;
                    
                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 3000);
                        
                        const res = await fetch(`https://api.lanyard.rest/v1/users/${id}`, {
                            signal: controller.signal,
                            mode: 'cors'
                        });
                        clearTimeout(timeoutId);
                        
                        if (res.ok) {
                            const data = await res.json();
                            if (data.success && data.data.discord_user) {
                                memberData = {
                                    user: data.data.discord_user,
                                    status: data.data.discord_status || 'offline'
                                };
                            }
                        }
                    } catch (err) {
                        console.log(`API failed for user ${id}, using fallback`);
                    }
                    
                    if (!memberData) {
                        const staticMember = staticMembers[i];
                        if (staticMember) {
                            memberData = {
                                user: {
                                    id: staticMember.id,
                                    username: staticMember.username,
                                    avatar: null
                                },
                                status: staticMember.status
                            };
                        }
                    }
                    
                    if (memberData) {
                        const { user, status } = memberData;

                        const memberCard = document.createElement('div');
                        memberCard.className = 'member-card';
                        memberCard.style.opacity = '0';
                        memberCard.style.transform = 'translateY(30px)';
                        
                        const avatarHtml = user.avatar 
                            ? `<img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png?size=128" 
                                   alt="${user.username}" class="avatar-img">`
                            : `<div class="avatar-img placeholder" style="background: linear-gradient(45deg, #4b0082, #8a2be2); display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; font-weight: bold;">${user.username.charAt(0).toUpperCase()}</div>`;
                        
                        memberCard.innerHTML = `
                            <div class="member-avatar">
                                ${avatarHtml}
                                <div class="status-indicator ${status}"></div>
                            </div>
                            <div class="member-info">
                                <h3 class="member-name">${user.username}</h3>
                                <p class="member-status">${status.charAt(0).toUpperCase() + status.slice(1)}</p>
                            </div>
                        `;
                        
                        membersGrid.appendChild(memberCard);
                        
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }
                }
                
                setTimeout(() => {
                    animateMembers();
                }, 200);
            }

            function animateMembers() {
                const memberCards = document.querySelectorAll('.member-card');
                memberCards.forEach((card, index) => {
                    setTimeout(() => {
                        card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                        
                        setTimeout(() => {
                            card.style.transform = 'translateY(0) scale(1.05)';
                            setTimeout(() => {
                                card.style.transform = 'translateY(0) scale(1)';
                            }, 200);
                        }, 300);
                    }, index * 150);
                });
            }

            // Smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        if (this.getAttribute('href') === '#members') {
                            setTimeout(() => {
                                animateMembers();
                            }, 800);
                        }
                    }
                });
            });

            // Mobile menu functionality - FIXED
            const mobileMenuToggle = document.getElementById("mobileMenuToggle");
            const mobileMenu = document.getElementById("mobileMenu");

            if (mobileMenuToggle && mobileMenu) {
                mobileMenuToggle.addEventListener('click', (e) => {
                    e.stopPropagation();
                    console.log('Mobile menu toggle clicked'); // Debug log
                    
                    const isShowing = mobileMenu.classList.contains('show');
                    
                    if (isShowing) {
                        mobileMenu.classList.remove('show');
                        mobileMenuToggle.classList.remove('active');
                    } else {
                        mobileMenu.classList.add('show');
                        mobileMenuToggle.classList.add('active');
                    }
                });

                // Close mobile menu when clicking on links
                document.querySelectorAll('.mobile-menu .nav-link, .mobile-menu .discord-btn').forEach(link => {
                    link.addEventListener('click', () => {
                        mobileMenu.classList.remove('show');
                        mobileMenuToggle.classList.remove('active');
                    });
                });

                // Close mobile menu when clicking outside
                document.addEventListener('click', (e) => {
                    if (!mobileMenuToggle.contains(e.target) && !mobileMenu.contains(e.target)) {
                        mobileMenu.classList.remove('show');
                        mobileMenuToggle.classList.remove('active');
                    }
                });
            }

            loadMembers();
        });
    </script>
</body>
</html>